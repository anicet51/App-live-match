<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Live Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .app {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        .nav {
            display: flex;
            background: #2c3e50;
            color: white;
        }
        
        .nav-btn {
            flex: 1;
            padding: 15px;
            border: none;
            background: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .nav-btn.active {
            background: #3498db;
        }
        
        .nav-btn:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .view {
            display: none;
            padding: 20px;
        }
        
        .view.active {
            display: block;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .score-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .score-input input {
            width: 60px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
        }
        
        .teams-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .team {
            text-align: center;
        }
        
        .team-name {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .score-display {
            font-size: 36px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-bottom: 10px;
            transition: background 0.3s;
        }
        
        .btn:hover {
            background: #2980b9;
        }
        
        .btn-success {
            background: #27ae60;
        }
        
        .btn-success:hover {
            background: #229954;
        }
        
        .btn-danger {
            background: #e74c3c;
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .event-form {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .event-form-row {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .event-form-row > * {
            flex: 1;
        }
        
        .events-list {
            margin-top: 20px;
        }
        
        .event-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: white;
            border-left: 4px solid #3498db;
            margin-bottom: 5px;
            border-radius: 5px;
        }
        
        .event-item.goal {
            border-left-color: #27ae60;
        }
        
        .event-item.yellow {
            border-left-color: #f39c12;
        }
        
        .event-item.red {
            border-left-color: #e74c3c;
        }
        
        .weather-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .weather-btn {
            padding: 15px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }
        
        .weather-btn.active {
            border-color: #3498db;
            background: #e3f2fd;
        }
        
        .weather-emoji {
            font-size: 24px;
            display: block;
            margin-bottom: 5px;
        }
        
        .export-canvas {
            width: 100%;
            max-width: 300px;
            height: 300px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 20px auto;
            display: block;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 480px) {
            .app {
                max-width: 100%;
            }
            
            .event-form-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Navigation -->
        <nav class="nav">
            <button class="nav-btn active" onclick="showView('input')">Saisie</button>
            <button class="nav-btn" onclick="showView('timeline')">Timeline</button>
            <button class="nav-btn" onclick="showView('export')">Export</button>
        </nav>

        <!-- Vue Saisie -->
        <div id="input-view" class="view active">
            <h2 style="margin-bottom: 20px;">Configuration du Match</h2>
            
            <div class="card">
                <h3>√âquipes</h3>
                <div class="form-group">
                    <label>√âquipe Domicile</label>
                    <input type="text" id="homeTeam" placeholder="Nom √©quipe domicile" onchange="updateMatch()">
                </div>
                <div class="form-group">
                    <label>√âquipe Visiteuse</label>
                    <input type="text" id="awayTeam" placeholder="Nom √©quipe visiteuse" onchange="updateMatch()">
                </div>
            </div>

            <div class="card">
                <h3>Score Actuel</h3>
                <div class="score-input">
                    <input type="number" id="homeScore" value="0" min="0" onchange="updateMatch()">
                    <span style="font-size: 24px;">-</span>
                    <input type="number" id="awayScore" value="0" min="0" onchange="updateMatch()">
                </div>
            </div>

            <div class="card">
                <h3>M√©t√©o</h3>
                <div class="weather-selector">
                    <div class="weather-btn active" onclick="selectWeather('sunny')">
                        <span class="weather-emoji">‚òÄÔ∏è</span>
                        Ensoleill√©
                    </div>
                    <div class="weather-btn" onclick="selectWeather('cloudy')">
                        <span class="weather-emoji">‚òÅÔ∏è</span>
                        Nuageux
                    </div>
                    <div class="weather-btn" onclick="selectWeather('rainy')">
                        <span class="weather-emoji">üåßÔ∏è</span>
                        Pluvieux
                    </div>
                    <div class="weather-btn" onclick="selectWeather('snowy')">
                        <span class="weather-emoji">‚ùÑÔ∏è</span>
                        Neige
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>Ajouter un √âv√©nement</h3>
                <div class="event-form">
                    <div class="event-form-row">
                        <select id="eventType">
                            <option value="goal">But ‚öΩ</option>
                            <option value="yellow">Carton Jaune üü®</option>
                            <option value="red">Carton Rouge üü•</option>
                        </select>
                        <select id="eventTeam">
                            <option value="home">Domicile</option>
                            <option value="away">Visiteuse</option>
                        </select>
                    </div>
                    <div class="event-form-row">
                        <input type="text" id="playerName" placeholder="Nom du joueur">
                        <input type="number" id="eventMinute" placeholder="Minute" min="1" max="120">
                    </div>
                    <button class="btn" onclick="addEvent()">Ajouter √âv√©nement</button>
                </div>
            </div>

            <div class="card">
                <h3>Scores Sp√©ciaux</h3>
                <div class="form-group">
                    <label>Score Mi-temps</label>
                    <div class="score-input">
                        <input type="number" id="halfTimeHome" value="0" min="0" onchange="updateMatch()">
                        <span>-</span>
                        <input type="number" id="halfTimeAway" value="0" min="0" onchange="updateMatch()">
                    </div>
                </div>
                <div class="form-group">
                    <label>Score Final</label>
                    <div class="score-input">
                        <input type="number" id="finalHome" value="0" min="0" onchange="updateMatch()">
                        <span>-</span>
                        <input type="number" id="finalAway" value="0" min="0" onchange="updateMatch()">
                    </div>
                </div>
            </div>
        </div>

        <!-- Vue Timeline -->
        <div id="timeline-view" class="view">
            <div class="teams-display">
                <div class="team">
                    <div class="team-name" id="timeline-home">√âquipe 1</div>
                </div>
                <div class="score-display">
                    <span id="timeline-score">0 - 0</span>
                </div>
                <div class="team">
                    <div class="team-name" id="timeline-away">√âquipe 2</div>
                </div>
            </div>

            <div class="card">
                <h3>√âv√©nements du Match</h3>
                <div id="events-timeline" class="events-list">
                    <p>Aucun √©v√©nement pour le moment</p>
                </div>
            </div>

            <div class="card">
                <h3>Informations Match</h3>
                <p><strong>Mi-temps :</strong> <span id="halftime-display">0 - 0</span></p>
                <p><strong>Score Final :</strong> <span id="final-display">0 - 0</span></p>
                <p><strong>M√©t√©o :</strong> <span id="weather-display">Ensoleill√© ‚òÄÔ∏è</span></p>
            </div>
        </div>

        <!-- Vue Export -->
        <div id="export-view" class="view">
            <h2>Export Visuel</h2>
            <div class="card">
                <canvas id="exportCanvas" class="export-canvas" width="1080" height="1080"></canvas>
                <button class="btn btn-success" onclick="generateVisual()">G√©n√©rer le Visuel</button>
                <button class="btn" id="downloadBtn" onclick="downloadImage()" style="display:none;">T√©l√©charger l'Image</button>
            </div>
        </div>
    </div>

    <script>
        // √âtat de l'application
        let matchData = {
            homeTeam: '',
            awayTeam: '',
            homeScore: 0,
            awayScore: 0,
            halfTimeHome: 0,
            halfTimeAway: 0,
            finalHome: 0,
            finalAway: 0,
            weather: 'sunny',
            events: []
        };

        const weatherConfig = {
            sunny: { name: 'Ensoleill√©', emoji: '‚òÄÔ∏è', color: '#87CEEB' },
            cloudy: { name: 'Nuageux', emoji: '‚òÅÔ∏è', color: '#A0A0A0' },
            rainy: { name: 'Pluvieux', emoji: 'üåßÔ∏è', color: '#4682B4' },
            snowy: { name: 'Neige', emoji: '‚ùÑÔ∏è', color: '#F0F8FF' }
        };

        // Navigation
        function showView(viewName) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById(viewName + '-view').classList.add('active');
            event.target.classList.add('active');
            
            if (viewName === 'timeline') {
                updateTimeline();
            }
        }

        // S√©lection m√©t√©o
        function selectWeather(weather) {
            matchData.weather = weather;
            
            document.querySelectorAll('.weather-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            
            updateTimeline();
            saveData();
        }

        // Mise √† jour des donn√©es
        function updateMatch() {
            matchData.homeTeam = document.getElementById('homeTeam').value;
            matchData.awayTeam = document.getElementById('awayTeam').value;
            matchData.homeScore = parseInt(document.getElementById('homeScore').value) || 0;
            matchData.awayScore = parseInt(document.getElementById('awayScore').value) || 0;
            matchData.halfTimeHome = parseInt(document.getElementById('halfTimeHome').value) || 0;
            matchData.halfTimeAway = parseInt(document.getElementById('halfTimeAway').value) || 0;
            matchData.finalHome = parseInt(document.getElementById('finalHome').value) || 0;
            matchData.finalAway = parseInt(document.getElementById('finalAway').value) || 0;
            
            updateTimeline();
            saveData();
        }

        // Ajout d'√©v√©nement
        function addEvent() {
            const type = document.getElementById('eventType').value;
            const team = document.getElementById('eventTeam').value;
            const player = document.getElementById('playerName').value;
            const minute = parseInt(document.getElementById('eventMinute').value);

            if (!player || !minute) {
                alert('Veuillez remplir tous les champs');
                return;
            }

            const event = {
                type: type,
                team: team,
                player: player,
                minute: minute,
                id: Date.now()
            };

            matchData.events.push(event);
            matchData.events.sort((a, b) => a.minute - b.minute);

            // Reset form
            document.getElementById('playerName').value = '';
            document.getElementById('eventMinute').value = '';

            updateEventsDisplay();
            updateTimeline();
            saveData();
        }

        // Suppression d'√©v√©nement
        function removeEvent(eventId) {
            matchData.events = matchData.events.filter(e => e.id !== eventId);
            updateEventsDisplay();
            updateTimeline();
            saveData();
        }

        // Affichage des √©v√©nements
        function updateEventsDisplay() {
            // Dans la vue de saisie
            const eventsContainer = document.createElement('div');
            eventsContainer.innerHTML = '<h3>√âv√©nements Ajout√©s</h3>';
            
            if (matchData.events.length === 0) {
                eventsContainer.innerHTML += '<p>Aucun √©v√©nement</p>';
            } else {
                matchData.events.forEach(event => {
                    const eventDiv = document.createElement('div');
                    eventDiv.className = `event-item ${event.type}`;
                    
                    const eventIcon = event.type === 'goal' ? '‚öΩ' : 
                                    event.type === 'yellow' ? 'üü®' : 'üü•';
                    
                    eventDiv.innerHTML = `
                        <span>${event.minute}' ${eventIcon} ${event.player} (${event.team === 'home' ? matchData.homeTeam || 'Domicile' : matchData.awayTeam || 'Visiteuse'})</span>
                        <button onclick="removeEvent(${event.id})" style="background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">√ó</button>
                    `;
                    eventsContainer.appendChild(eventDiv);
                });
            }
            
            // Ajout/mise √† jour dans la vue de saisie
            let existingEvents = document.getElementById('current-events');
            if (existingEvents) {
                existingEvents.remove();
            }
            
            eventsContainer.id = 'current-events';
            eventsContainer.className = 'card';
            document.getElementById('input-view').appendChild(eventsContainer);
        }

        // Mise √† jour de la timeline
        function updateTimeline() {
            document.getElementById('timeline-home').textContent = matchData.homeTeam || '√âquipe Domicile';
            document.getElementById('timeline-away').textContent = matchData.awayTeam || '√âquipe Visiteuse';
            document.getElementById('timeline-score').textContent = `${matchData.homeScore} - ${matchData.awayScore}`;
            document.getElementById('halftime-display').textContent = `${matchData.halfTimeHome} - ${matchData.halfTimeAway}`;
            document.getElementById('final-display').textContent = `${matchData.finalHome} - ${matchData.finalAway}`;
            document.getElementById('weather-display').textContent = `${weatherConfig[matchData.weather].name} ${weatherConfig[matchData.weather].emoji}`;

            // Timeline des √©v√©nements
            const timeline = document.getElementById('events-timeline');
            
            if (matchData.events.length === 0) {
                timeline.innerHTML = '<p>Aucun √©v√©nement pour le moment</p>';
            } else {
                timeline.innerHTML = '';
                matchData.events.forEach(event => {
                    const eventDiv = document.createElement('div');
                    eventDiv.className = `event-item ${event.type}`;
                    
                    const eventIcon = event.type === 'goal' ? '‚öΩ' : 
                                    event.type === 'yellow' ? 'üü®' : 'üü•';
                    
                    const teamName = event.team === 'home' ? 
                                   (matchData.homeTeam || 'Domicile') : 
                                   (matchData.awayTeam || 'Visiteuse');
                    
                    eventDiv.innerHTML = `
                        <span>${event.minute}' ${eventIcon} ${event.player}</span>
                        <span>${teamName}</span>
                    `;
                    timeline.appendChild(eventDiv);
                });
            }
        }

        // G√©n√©ration du visuel
        function generateVisual() {
            const canvas = document.getElementById('exportCanvas');
            const ctx = canvas.getContext('2d');
            
            // Fond selon m√©t√©o
            const bgColor = weatherConfig[matchData.weather].color;
            ctx.fillStyle = bgColor;
            ctx.fillRect(0, 0, 1080, 1080);
            
            // Configuration des couleurs et polices
            ctx.textAlign = 'center';
            ctx.fillStyle = '#2c3e50';
            
            // Titre
            ctx.font = 'bold 60px Arial';
            ctx.fillText('LIVE MATCH', 540, 150);
            
            // √âquipes
            ctx.font = 'bold 40px Arial';
            const homeTeam = matchData.homeTeam || '√âquipe Domicile';
            const awayTeam = matchData.awayTeam || '√âquipe Visiteuse';
            
            ctx.fillText(homeTeam, 270, 250);
            ctx.fillText('VS', 540, 250);
            ctx.fillText(awayTeam, 810, 250);
            
            // Score actuel
            ctx.font = 'bold 120px Arial';
            ctx.fillText(`${matchData.homeScore} - ${matchData.awayScore}`, 540, 400);
            
            // Mi-temps et Final
            ctx.font = '32px Arial';
            ctx.fillText(`Mi-temps: ${matchData.halfTimeHome} - ${matchData.halfTimeAway}`, 540, 480);
            ctx.fillText(`Final: ${matchData.finalHome} - ${matchData.finalAway}`, 540, 520);
            
            // Timeline des √©v√©nements
            ctx.font = 'bold 36px Arial';
            ctx.fillText('√âV√âNEMENTS', 540, 600);
            
            ctx.font = '28px Arial';
            let yPos = 650;
            
            if (matchData.events.length === 0) {
                ctx.fillText('Aucun √©v√©nement', 540, yPos);
            } else {
                matchData.events.forEach((event, index) => {
                    if (yPos > 950) return; // Limite d'espace
                    
                    const eventIcon = event.type === 'goal' ? '‚öΩ' : 
                                    event.type === 'yellow' ? 'üü®' : 'üü•';
                    
                    const teamName = event.team === 'home' ? homeTeam : awayTeam;
                    const text = `${event.minute}' ${eventIcon} ${event.player} (${teamName})`;
                    
                    ctx.fillText(text, 540, yPos);
                    yPos += 40;
                });
            }
            
            // M√©t√©o
            ctx.font = '32px Arial';
            const weatherText = `${weatherConfig[matchData.weather].name} ${weatherConfig[matchData.weather].emoji}`;
            ctx.fillText(weatherText, 540, 1030);
            
            document.getElementById('downloadBtn').style.display = 'block';
        }

        // T√©l√©chargement de l'image
        function downloadImage() {
            const canvas = document.getElementById('exportCanvas');
            const link = document.createElement('a');
            link.download = 'match-live.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        // Sauvegarde locale
        function saveData() {
            localStorage.setItem('footballLiveData', JSON.stringify(matchData));
        }

        // Chargement des donn√©es
        function loadData() {
            const saved = localStorage.getItem('footballLiveData');
            if (saved) {
                matchData = { ...matchData, ...JSON.parse(saved) };
                
                // Mise √† jour des inputs
                document.getElementById('homeTeam').value = matchData.homeTeam;
                document.getElementById('awayTeam').value = matchData.awayTeam;
                document.getElementById('homeScore').value = matchData.homeScore;
                document.getElementById('awayScore').value = matchData.awayScore;
                document.getElementById('halfTimeHome').value = matchData.halfTimeHome;
                document.getElementById('halfTimeAway').value = matchData.halfTimeAway;
                document.getElementById('finalHome').value = matchData.finalHome;
                document.getElementById('finalAway').value = matchData.finalAway;
                
                updateEventsDisplay();
                updateTimeline();
            }
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            updateEventsDisplay();
            updateTimeline();
        });
    </script>
</body>
</html>